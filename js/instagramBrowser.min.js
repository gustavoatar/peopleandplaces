function instagramFetch(e){var t=e.accessToken,i={access_token:t};fetchCMD(i,e)}function fetchCMD(e,t){var i="";i="user"==t.mode?"https://api.instagram.com/v1/users/"+t.userID+"/media/recent/?callback=?":"https://api.instagram.com/v1/media/popular?callback=?",$.getJSON(i,e,function(e){onPhotoLoaded(e,t)})}function instagramSearch(e){var t=e.accessToken,i={access_token:t},n=$(".searchBox").val().replace(/ /g,"");searchCMD(i,e,n)}function searchCMD(e,t,i){var n="";n="https://api.instagram.com/v1/tags/"+i+"/media/recent?callback=?",$.getJSON(n,e,function(e){onPhotoLoaded(e,t)})}function instagramUserSearch(e){var t=e.accessToken,i=$(".searchBox").val().replace(/ /g,""),n={access_token:t,q:i};userSearchCMD(n,e)}function userSearchCMD(e,t){var i="https://api.instagram.com/v1/users/search?callback=?";$.getJSON(i,e,function(e){onUserLoaded(e,t)})}function onUserLoaded(e){if(200==e.meta.code){var t=e.data;if(t.length>0)for(var i in t){var n=t[i],s="";s='<div class="instagram-user" id="p'+n.id+'" title="'+n.username+'" rel="'+n.id+'">',s+="<img src='"+n.profile_picture+"' />",s+="<span class='instagram-username'>"+n.username+"</span>",s+="<span class='instagram-fullname'>"+n.full_name+"</span>",s+="</div>",$(s).appendTo(ibObj)}}}function instagramTagsLoadMore(e){var t=e.accessToken,i={access_token:t,max_tag_id:instagramBrowserNextMax},n=$(".searchBox").val().replace(/ /g,"");loadMoreCMD(e,i,n)}function loadMoreCMD(e,t,i){var n="";n="https://api.instagram.com/v1/tags/"+i+"/media/recent?callback=?",$.getJSON(n,t,function(t){onPhotoLoaded(t,e)})}function instagramUsersLoadMore(e){var t=e.accessToken,i={access_token:t,max_id:instagramBrowserNextMax};loadMoreUsersCMD(e,i)}function loadMoreUsersCMD(e,t){cmdURL="https://api.instagram.com/v1/users/"+e.userID+"/media/recent/?callback=?",$.getJSON(cmdURL,t,function(t){onPhotoLoaded(t,e)})}function onPhotoLoaded(e,t){if(instagramBrowserNextMax=e.pagination?e.pagination.next_max_id?e.pagination.next_max_id:"Empty":"Empty",200==e.meta.code){var i=e.data;if(""!=ibObj.html())var n=!0;else var n=!1;if(i.length>0){for(var s in i){var o=i[s],a="",r="";r=o.caption?o.caption.text:"Instagram Photo",a='<span class="instagram-photo" rel="'+o.user.full_name+'" id="p'+o.id+'" title="'+r+" ("+o.likes.count+' Likes)" data-created="'+o.created_time+'">',a+='<img src="'+o.images.standard_resolution.url+'" width="100%">',a+="</span>",$(a).appendTo(ibObj)}var l=$(".instagram-photo").size()-1;0==n&&$(".instagram-photo").hide(),$(".instagram-photo").each(function(e){currentPhoto=$(this),currentPhoto.delay(t.delayInterval*e).fadeIn(t.speed),$("#seachInstagramLoadMoreContainer").remove(),e==l&&"Empty"!=instagramBrowserNextMax&&$('<div id="seachInstagramLoadMoreContainer"><a class="seachInstagramLoadMore btn btn-inverse">Load More</a></div>').appendTo(ibObj)})}else alert("empty")}else alert(e.meta.error_message)}var ibObj,instagramBrowserNextMax,customSettings;$.fn.instagramBrowser=function(e){var t={mode:"popular",accessToken:"3794301.f59def8.e08bcd8b10614074882b2d1b787e2b6f",userID:"1138644",speed:700,delayInterval:80,searchBox:".searchContainer .searchBox"};return ibObj=$(this),$.extend(t,e),this.each(function(){$(document).ready(function(){instagramFetch(t)}),$(".searchInstagram").click(function(){ibObj.html(""),"user"==$(t.searchBox).attr("rel")?instagramUserSearch(t):instagramSearch(t)}),$(document).on("click",".seachInstagramLoadMore",function(){"user"==$(t.searchBox).attr("rel")?instagramUsersLoadMore(customSettings):instagramTagsLoadMore(t)}),$(document).on("click",".instagram-user",function(){ibObj.html(""),customSettings=t,customSettings.mode="user",customSettings.userID=$(this).attr("rel"),instagramFetch(t)}),$(".searchBox").keypress(function(e){13==e.which&&(jQuery(this).blur(),jQuery(".searchInstagram").focus().click())}),$(document).on({mouseenter:function(){var e=$(this);e.height();var t=e.width(),i=parseInt(e.attr("data-created"));i=new Date(1e3*i),i=dateFormat(i,"dddd, mmmm dS, yyyy, h:MM:ss TT");var n='<div class="instagram-hover-cover">';n+="<h3>"+e.attr("rel")+"</h3>",n+="<em>"+i+"</em>",n+="<p>"+e.attr("title").substring(0,196)+"</p>",n+="</div>",e.append(n),$(".instagram-hover-cover").hide().css({height:"114px",width:t}).slideDown("fast")},mouseleave:function(){var e=$(this);e.find(".instagram-hover-cover").delay(500).slideUp("fast",function(){$(this).remove()})}},".instagram-photo")})};